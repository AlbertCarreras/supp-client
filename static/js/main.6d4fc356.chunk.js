(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){"use strict";var a=n(11),r=n(16),o=n(4),s=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,null,[{key:"capitalize",value:function(e){return e.split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1)}).join(" ")}},{key:"usernameShortFormat",value:function(t){return e.capitalize(t).split(" ")[0].substring(0,9)}},{key:"getReadableDistance",value:function(e){return void 0!==e?e<1?"".concat((5280*e).toFixed(1)," ft"):"".concat(e.toFixed(1)," mi"):null}},{key:"getNotPicAvatar",value:function(){return o.d.url.GITHUB_URL_ROOT+"/assets/avatars/avatar".concat(Math.ceil(Math.random()*Math.floor(4)),".gif")}},{key:"getStandardImageUrl",value:function(t){return"undefined"===t?e.getNotPicAvatar():void 0===t?e.getNotPicAvatar():"/rails"===t.substring(0,6)?"".concat(o.d.url.API_SHORT_ROOT+t):t}},{key:"getSearchMatches",value:function(e){return fetch("".concat(o.d.url.API_ROOT,"/interests"),{method:"POST",headers:o.a,body:JSON.stringify({search:{searchTerm:e.toLowerCase()}})}).then(function(e){return e.json()})}}]),e}();t.a=s},137:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(9),s=n(11),c=n(16),i=n(15),l=n(13),u=n(14),m=n(32),d=n(70),p=n(202),h=n(213),f=n.n(h),g=n(12),v=n(431),E=n(4),O=n(17),b=n(5),y=function(e,t){var n={user:{interests:t}};return function(t){fetch("".concat(E.d.url.API_ROOT,"/user/").concat(e,"/interests"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(n)}).then(function(e){return e.json()}).then(function(e){return t({type:b.p,payload:{userInterestArray:e.interests}})}).catch(function(){return t({type:b.a,payload:{key:"unauthorizedToken",value:"Unauthorized credentials. Please, log in again."}}),O.a.deleteToken(),t({type:b.h})})}};function C(e){return{type:b.q,payload:{selectedCommonInterest:e}}}var I=n(36),k=Object(o.b)(function(e){return{selectedInterest:e.userInterests.selectedCommonInterest,userInterests:e.userInterests.userInterests,userId:e.userAuth.userId}},function(e){return{selectCommonInterests:function(t){return e(C(t))},thunkSaveUserInterests:function(t,n){return e(y(t,n))},thunkSaveFilteredClosestUsers:function(t){return e(Object(I.b)(t))}}})(Object(v.a)(function(e){return r.a.createElement("div",{className:"interest-list"},function(){var t=e.searchTermArray;return void 0!==e.selectedInterest&&(t=t.filter(function(t){return t!==e.selectedInterest})),t.map(function(t){return r.a.createElement("div",{key:t.id},g.a.capitalize(t.name),r.a.createElement(p.a,{onClick:function(){e.selectCommonInterests(t),e.thunkSaveFilteredClosestUsers(t.id)},color:"teal",name:"users"}),e.userInterests.find(function(e){return e.id===t.id})?null:r.a.createElement(p.a,{onClick:function(){e.thunkSaveUserInterests(e.userId,t)},color:"teal",name:"user plus"}))})}())})),j=Object(o.b)(function(e){return{userId:e.userAuth.userId}},function(e){return{thunkCreateNewWord:function(t,n){return e(function(e,t){return function(n){fetch("".concat(E.d.url.API_ROOT,"/interests/create"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({interest:{newTerm:t}})}).then(function(e){return e.json()}).then(function(t){return n(y(e,t))}).catch(function(){return n({type:b.a,payload:{key:"unauthorizedToken",value:"Sorry, there was an error processing the information. Please, log in again."}}),O.a.deleteToken(),n({type:b.h})})}}(t,n))}}})(function(e){return r.a.createElement("div",{className:"new-word-input",onClick:function(){e.thunkCreateNewWord(e.userId,g.a.capitalize(e.searchTerm.toLowerCase())),e.cleanSearchTerm()}},r.a.createElement("p",null,"New interest!"),r.a.createElement("div",{className:"new-word-btn"},r.a.createElement(p.a,{color:"teal",name:"add"}),g.a.capitalize(e.searchTerm.toLowerCase())))}),_=function(e){function t(){var e,a;Object(s.a)(this,t);for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={searchTerm:"",searchTermArray:[]},a.handleChange=function(e){var t=new(n(176));t.addWords("suck"),t.removeWords("hell"),a.setState(Object(m.a)({},e.target.name,t.isProfane(e.target.value)?"":e.target.value),function(){return a.searchTerm(a.state.searchTerm)})},a.searchTerm=function(e){return""===e||e.length<2?a.setState({searchTermArray:[]}):f.a.debounce(function(){return g.a.getSearchMatches(e).then(function(e){return a.setState({searchTermArray:e})}).catch(function(e){})},100).call(Object(d.a)(Object(d.a)(a)))},a.cleanSearchTerm=function(){a.setState({searchTerm:""})},a.displayInterestList=function(){return a.state.searchTermArray.length>0?r.a.createElement(k,{searchTermArray:a.state.searchTermArray}):a.state.searchTerm.length>2?r.a.createElement(j,{searchTerm:a.state.searchTerm,cleanSearchTerm:a.cleanSearchTerm}):void 0},a.checkValues=function(){return""!==a.state.searchTerm?a.displayInterestList():r.a.createElement("p",{className:"animated bounceIn delay-5s"},"Start here",r.a.createElement(p.a,{color:"teal",name:"arrow up"}))},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"ui search"},r.a.createElement("div",{className:"ui icon input"},r.a.createElement("input",{className:"prompt",type:"text",placeholder:"Search activities you \u2665",name:"searchTerm",onChange:this.handleChange,value:this.state.searchTerm}),r.a.createElement("i",{className:"search icon"})),this.checkValues())}}]),t}(a.Component),T=Object(o.b)(function(e){return{userInterests:e.userInterests.userInterests}},function(e){return{selectCommonInterests:function(t){return e(C(t))},thunkRemoveUserInterests:function(t){return e(function(e){var t={user:{interests:e}};return function(n){fetch("".concat(E.d.url.API_ROOT,"/user_interests/").concat(e.id),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){return n({type:b.p,payload:{userInterestArray:e.interests}})}).catch(function(){return n({type:b.a,payload:{key:"unauthorizedToken",value:"Unauthorized credentials. Please, log in again."}}),O.a.deleteToken(),n({type:b.h})})}}(t))},thunkSaveFilteredClosestUsers:function(t){return e(Object(I.b)(t))}}})(Object(v.a)(function(e){return r.a.createElement("div",{className:"interest-list"},e.userInterests.length>0?e.userInterests.map(function(t){return r.a.createElement("div",{key:t.id},g.a.capitalize(t.name),r.a.createElement(p.a,{onClick:function(){e.selectCommonInterests(t),e.thunkSaveFilteredClosestUsers(t.id),e.onClickClose&&e.onClickClose()},color:"teal",name:"users"}),r.a.createElement(p.a,{onClick:function(){e.thunkRemoveUserInterests(t)},color:"teal",name:"user close"}))}):r.a.createElement("div",{className:"empty-message"},r.a.createElement("p",null,"Choose your activities clicking on",r.a.createElement(p.a,{color:"teal",name:"user plus"})),r.a.createElement("p",null,"Unselect your activities clicking on",r.a.createElement(p.a,{color:"teal",name:"user remove"}))))})),w=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"heart-message"},"Meet people who",r.a.createElement(p.a,{color:"red",name:"heart"})),void 0!==this.props.selectedCommonInterest?r.a.createElement("div",{className:"line-container"},g.a.capitalize(this.props.selectedCommonInterest.name),r.a.createElement(p.a,{onClick:function(){e.props.unselectCommonInterests(),e.props.thunkSaveClosestUsers()},color:"teal",name:"remove"}),this.props.userInterests.find(function(t){return t.id===e.props.selectedCommonInterest.id})?null:r.a.createElement(p.a,{onClick:function(){e.props.thunkSaveUserInterests(e.props.userId,e.props.selectedCommonInterest)},color:"teal",name:"user plus"})):r.a.createElement("div",{className:"empty-message"},r.a.createElement("p",null,"Select an activity by clicking on",r.a.createElement(p.a,{color:"teal",name:"users"})),r.a.createElement("p",null,"Unselect your activities clicking on",r.a.createElement(p.a,{color:"teal",name:"remove"}))),r.a.createElement("div",{className:"heart-message"},"What you",r.a.createElement(p.a,{color:"red",name:"heart"})),r.a.createElement(T,null))}}]),t}(a.Component),U=Object(o.b)(function(e){return{selectedCommonInterest:e.userInterests.selectedCommonInterest,userInterests:e.userInterests.userInterests}},function(e){return{unselectCommonInterests:function(){return e({type:b.r})},thunkSaveUserInterests:function(t,n){return e(y(t,n))},thunkSaveClosestUsers:function(){return e(Object(I.a)())}}})(w),S=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"aside-interest-container"},r.a.createElement(_,null),r.a.createElement(U,null))}}]),t}(a.Component),N=n(424),R=n(433),A=n(426),L=n(419),P=n(429),G=Object(o.b)(null,function(e){return{selectCommonInterests:function(t){return e(C(t))},thunkSaveFilteredClosestUsers:function(t){return e(Object(I.b)(t))}}})(Object(v.a)(function(e){return r.a.createElement("div",{className:"interest-list"},e.friendInterestArray.map(function(t){return r.a.createElement("div",{key:t.id},g.a.capitalize(t.name),r.a.createElement(p.a,{onClick:function(){e.selectCommonInterests(t),e.thunkSaveFilteredClosestUsers(t.id),e.onClickClose()},color:"teal",name:"users"}))}))})),M=n(427),x=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,null,[{key:"getConversations",value:function(){return fetch("".concat(E.d.url.API_ROOT,"/conversations"),{method:"GET",headers:E.b}).then(function(e){return e.json()})}},{key:"fetchToWebsocket",value:function(e,t){fetch("".concat(E.d.url.API_ROOT,"/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(t)})}}]),e}();function z(e){return{type:b.o,payload:{selectedConversation:e}}}var B=Object(o.b)(function(e){return{user_sender_id:e.userAuth.userId,conversations:e.userConversations.conversations}},function(e){return{saveSelectedConversation:function(t){return e(z(t))}}})(function(e){function t(){var t={title:"PRIVATE",sender_id:e.user_sender_id,receiver_id:e.user_receiver_id};!function(t){var n=e.conversations.filter(function(e){return e.users.map(function(e){return e.id}).includes(t)});if(n.length>0)return e.saveSelectedConversation(n[0]),!0}(e.user_receiver_id)?(x.fetchToWebsocket("conversations",t),e.onClickClose()):e.onClickClose()}return r.a.createElement(M.a,{onClick:function(){return t()},primary:!0},"Say ",r.a.createElement("div",{className:"btn-logo"},"Supp?!"))}),H={background:"#5CDB95"},F={background:"#05386B"},D=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).isActive=function(){return n.props.user.active_user?H:F},n.render=function(){return r.a.createElement("div",{className:"profile-image-space",onClick:n.props.handleOpen},r.a.createElement("div",{className:"profile-image-username animated flipInY"},g.a.usernameShortFormat(n.props.user.username)),r.a.createElement("div",{className:"profile-image-distance animated flipInY"},n.props.user.distance),r.a.createElement("div",{className:"profile-image-logged animated flipInY",style:n.isActive()}),r.a.createElement("img",{className:"profile-image-list animated flipInY",src:g.a.getStandardImageUrl(n.props.user.profileImageLink),alt:"profile"}))},n}return Object(u.a)(t,e),t}(a.Component),W=Object(v.a)(D),V=function(e){function t(){var e,n;Object(s.a)(this,t);for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={modalOpen:!1},n.handleOpen=function(){return n.setState({modalOpen:!0})},n.handleClose=function(){return n.setState({modalOpen:!1})},n.selectTrigger=function(){return"userListYou"===n.props.origin?r.a.createElement(W,{user:n.props,handleOpen:n.handleOpen}):"userList"===n.props.origin?r.a.createElement(W,{user:n.props,handleOpen:n.handleOpen}):"chatHeader"===n.props.origin?r.a.createElement("img",{className:"chat-header-image",onClick:n.handleOpen,src:g.a.getStandardImageUrl(n.props.profileImageLink),alt:"Mini profile"}):void 0},n.displayDistance=function(){if("YOU"!==n.props.username&&n.props.distance)return r.a.createElement("div",{className:"ui tiny header"},r.a.createElement(p.a,{color:"teal",name:"map marker alternate"}),n.props.distance," from you.")},n.displayBio=function(){return n.props.bio?r.a.createElement("p",null,n.props.bio):"YOU"===n.props.username?r.a.createElement(a.Fragment,null,r.a.createElement("p",null,"You have not written anything yet."),r.a.createElement(p.a,{color:"teal",name:"pencil alternate"}),r.a.createElement(R.a,{to:E.d.route.URL_USER_PROFILE,exact:!0},"Edit Your Profile")):r.a.createElement("p",null,g.a.capitalize(n.props.username)," has not written anything yet.")},n.render=function(){return r.a.createElement(A.a,{dimmer:"inverted",size:"tiny",trigger:n.selectTrigger(),open:n.state.modalOpen,onClose:n.handleClose},r.a.createElement(A.a.Header,null,r.a.createElement("div",{className:"right"},g.a.capitalize(n.props.username),r.a.createElement(p.a,{color:"teal",name:"close",onClick:n.handleClose}))),r.a.createElement(A.a.Content,{image:!0},r.a.createElement(L.a,{size:"medium",wrapped:!0,src:g.a.getStandardImageUrl(n.props.profileImageLink)}),r.a.createElement(A.a.Description,null,r.a.createElement(P.a,null,"About me"),n.displayBio(),n.displayDistance(),r.a.createElement(P.a,null,"Interests"),"YOU"===n.props.username?r.a.createElement(T,{onClickClose:n.handleClose}):r.a.createElement(G,{friendInterestArray:n.props.interests,onClickClose:n.handleClose}))),r.a.createElement(A.a.Actions,null,"YOU"===n.props.username?null:r.a.createElement(B,{user_receiver_id:n.props.userId,onClickClose:n.handleClose})))},n}return Object(u.a)(t,e),t}(a.Component),K=Object(v.a)(V),Y=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).generateUserList=function(e){return e.map(function(e){return r.a.createElement(K,{key:e.userId,origin:"userList",bio:e.bio,userId:e.userId,username:e.username,interests:e.interests,active_user:e.active_user,profileImageLink:e.profileImageLink,distance:g.a.getReadableDistance(e.distance)})})},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"central-container"},r.a.createElement(K,{origin:"userListYou",username:"YOU",active_user:!0,bio:this.props.bio,profileImageLink:this.props.profileImageLink}),this.props.prevGeolocationLat?0!==this.props.closestUsers.length?this.generateUserList(this.props.closestUsers):r.a.createElement("div",null,r.a.createElement("p",{className:"loading-message"}," Ups! It looks like there's nobody with that interest around. Try another one!")):r.a.createElement("div",null,r.a.createElement(N.a,{active:!0}),r.a.createElement("p",{className:"loading-message"}," Finding you location and people around you... ")))}}]),t}(a.Component),J=Object(o.b)(function(e){return{username:e.userProfile.username,bio:e.userProfile.bio,loggedIn:e.userAuth.loggedIn,profileImageLink:e.userProfile.profileImageLink,closestUsers:e.userFriends.closestUsers,prevGeolocationLat:e.userProfile.prevGeolocationLat}},null)(Y),q=function(e){function t(){var e,a;Object(s.a)(this,t);for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return(a=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={text:""},a.handleChange=function(e){var t=new(n(176));t.addWords("suck"),t.removeWords("hell"),a.setState({text:t.clean(e.target.value)})},a.pressedEnter=function(e){"Enter"===e.key&&a.handleSubmit()},a.handleSubmit=function(){var e={text:a.state.text,conversation_id:a.props.selectedConversation.id};x.fetchToWebsocket("messages",e),a.setState({text:""})},a.render=function(){return r.a.createElement("div",{className:"new-message-form"},r.a.createElement("textarea",{className:"new-message-input",type:"text",value:a.state.text,onChange:a.handleChange,onKeyDown:a.pressedEnter,placeholder:"Enter new message"}),r.a.createElement("div",{className:"chat-submit-btn",onClick:a.handleSubmit},r.a.createElement(p.a,{color:"teal",name:"send"}),r.a.createElement("p",{className:"footer-logo"},"Suppmit")))},a}return Object(u.a)(t,e),t}(a.Component),Z=Object(o.b)(function(e){return{userId:e.userAuth.userId,selectedConversation:e.userConversations.selectedConversation}},null)(q),$={background:"rgba(92, 219, 149, 0.25)",textAlign:"right"},Q={background:"rgba(55,150,131, 0.25)"},X=Object(o.b)(function(e){return{userId:e.userAuth.userId,conversations:e.userConversations.conversations,selectedConversation:e.userConversations.selectedConversation}},function(e){return{cleanSelectedConversation:function(){return e({type:b.d})}}})(function(e){function t(){return e.selectedConversation.users.find(function(t){return t.id!==e.userId})}return console.log(e.selectedConversation,e.userId),r.a.createElement("div",{className:"messages-box animated slideInUp delay-5s"},r.a.createElement("div",{className:"messages-header"},r.a.createElement("div",{className:"chat-header-title"},r.a.createElement(p.a,{color:"teal",name:"chat"}),"with ",g.a.capitalize(t().username)),r.a.createElement(K,{origin:"chatHeader",bio:t().bio,userId:t().id,username:t().username,interests:t().interests,profileImageLink:t().profile_image_url,distance:g.a.getReadableDistance(t().distance)}),r.a.createElement(p.a,{onClick:e.cleanSelectedConversation,color:"teal",name:"close"})),r.a.createElement("div",{className:"outer-messages-list"},r.a.createElement("div",{className:"messages-list"},e.selectedConversation.messages.sort(function(e,t){return new Date(e.created_at)-new Date(t.created_at)}).map(function(t){return r.a.createElement("div",{key:t.id,className:"message-box",style:(a=t.user.id,a===e.userId?$:Q)},r.a.createElement("div",null,r.a.createElement("div",{className:"message-box-time"},(n=t.created_at,new Date(n).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})),g.a.capitalize(t.user.username)),r.a.createElement("div",{className:"message-box-content"},t.text)));var n,a}))),r.a.createElement(Z,{conversation_id:e.selectedConversation.id}))}),ee=n(46),te=n(45),ne=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleReceivedMessage=function(e){var t=e.message,a=Object(ee.a)(n.props.conversations),r=a.find(function(e){return e.id===t.conversation_id});r.messages=Object(ee.a)(r.messages).concat([t]),n.props.saveUpdatedConversations(a)},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(a.Fragment,null,this.props.conversations.map(function(t){return r.a.createElement(te.ActionCable,{key:t.id,channel:{channel:"MessagesChannel",conversation:t.id},onReceived:e.handleReceivedMessage})}))}}]),t}(a.Component),ae=Object(o.b)(function(e){return{conversations:e.userConversations.conversations}},function(e){return{saveUpdatedConversations:function(t){return e(function(e){return{type:b.j,payload:{conversations:e}}}(t))}}})(ne),re=Object(o.b)(function(e){return{userId:e.userAuth.userId,conversations:e.userConversations.conversations}},null)(function(e){function t(){return e.conversation.users.find(function(t){return t.id!==e.userId})}return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"conversation-image-box"},r.a.createElement("img",{className:"conversation-image",src:"undefined"!==t().profile_image_url?"".concat(E.d.url.API_SHORT_ROOT+e.conversation.users.find(function(t){return t.id!==e.userId}).profile_image_url):E.d.url.GITHUB_URL_ROOT+"/assets/avatars/avatar".concat(Math.ceil(Math.random()*Math.floor(4)),".gif"),alt:"Mini profile"})),r.a.createElement("div",{className:"conversation-text-box"},r.a.createElement("div",{className:"conversation-title"},g.a.capitalize(t().username)),0===e.conversation.messages.length?r.a.createElement("div",{className:"conversation-first-message"},r.a.createElement("p",null,"Start a conversation!")):r.a.createElement("div",{className:"conversation-first-message"},g.a.capitalize(e.conversation.messages[e.conversation.messages.length-1].user.username),": ","".concat(e.conversation.messages[e.conversation.messages.length-1].text.substring(0,15),"..."))))}),oe=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).componentDidMount=function(){n.props.thunkSaveConversations()},n.mapConversations=function(){return n.props.conversations.map(function(e){return r.a.createElement("div",{key:e.id,className:"conversation-box",onClick:function(){return n.props.saveSelectedConversation(e)}},r.a.createElement(re,{conversation:e}))})},n.render=function(){return r.a.createElement("div",{className:"conversations-box"},n.props.conversations.length?r.a.createElement(ae,null):null,r.a.createElement("h2",{className:"heart-message"},"Conversations"),r.a.createElement("div",{className:"conversations-list"},n.mapConversations()),n.props.selectedConversation?r.a.createElement(X,null):null)},n}return Object(u.a)(t,e),t}(r.a.Component),se=Object(o.b)(function(e){return{userId:e.userAuth.userId,conversations:e.userConversations.conversations,selectedConversation:e.userConversations.selectedConversation}},function(e){return{thunkSaveConversations:function(){return e(function(e){fetch("".concat(E.d.url.API_ROOT,"/conversations"),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(function(e){return e.json()}).then(function(t){return e({type:b.j,payload:{conversations:t}})}).catch(function(){return e({type:b.a,payload:{key:"unauthorizedToken",value:"Unauthorized credentials. Please, log in again."}}),O.a.deleteToken(),e({type:b.h})})})},saveSelectedConversation:function(t){return e(z(t))}}})(oe),ce=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"aside-container-messaging"},r.a.createElement(se,null))}}]),t}(a.Component),ie=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleReceivedActiveUser=function(e){switch(e.type){case"DC_USER":var t=Object(ee.a)(n.props.closestUsers),a=t.find(function(t){return t.userId===e.user});a&&(a.active_user=!1,n.props.updateClosestUsers(t));break;case"CO_USER":var r=Object(ee.a)(n.props.closestUsers),o=r.find(function(t){return t.userId===e.user});o&&(o.active_user=!0,n.props.updateClosestUsers(r));break;default:return null}},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(te.ActionCable,{channel:{channel:"GlobalPresenceChannel"},onReceived:function(t){return e.handleReceivedActiveUser(t)}})}}]),t}(a.Component),le=Object(o.b)(function(e){return{closestUsers:e.userFriends.closestUsers}},function(e){return{updateClosestUsers:function(t){return e(Object(I.c)(t))}}})(ie),ue=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleReceivedConversation=function(e){var t=e.conversation;t.users.map(function(e){return e.id}).includes(n.props.userId)&&n.props.appendNewConversation(t)},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return this.props.userId?r.a.createElement(te.ActionCable,{channel:{channel:"ConversationsChannel"},onReceived:function(t){return e.handleReceivedConversation(t)}}):null}}]),t}(a.Component),me=Object(o.b)(function(e){return{userId:e.userAuth.userId}},function(e){return{appendNewConversation:function(t){return e((n=t,console.log("appending one"),{type:b.b,payload:{receivedNewConversation:n}}));var n}}})(ue);t.a=Object(o.b)(function(e){return{showChatContainer:e.containerDisplay.showChatContainer,showInterestsContainer:e.containerDisplay.showInterestsContainer}},null)(function(e){return window.Appcues.track("Entered site"),r.a.createElement("div",{className:"home-container"},r.a.createElement(le,null)," ",r.a.createElement(me,null),r.a.createElement("div",{className:"screen-inner-home-container"},e.showChatContainer?r.a.createElement(ce,null):null,e.showInterestsContainer?r.a.createElement(S,null):null,r.a.createElement(J,null)," "),r.a.createElement("div",{className:"inner-home-container"},r.a.createElement(S,null)," ",r.a.createElement(J,null)," ",r.a.createElement(ce,null)," "))})},138:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(430),s=n(261),c=n(17),i=n(4),l=n(32),u=n(11),m=n(16),d=n(15),p=n(13),h=n(14),f=n(433),g=n(431),v=n(9),E=n(33),O=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={email:"",password:""},n.handleChange=function(e){n.setState(Object(l.a)({},e.target.name,e.target.value))},n.displayErrors=function(e){return n.props.errorMessages[e]?r.a.createElement("p",null,n.props.errorMessages[e]):null},n.pressedEnter=function(e){"Enter"===e.key&&n.handleSubmit()},n.handleSubmit=function(){n.props.cleanErrorMessages(),c.a.login(n.state).then(function(e){c.a.setToken(e.jwt),n.props.jwtSavedInLocalStorage(),n.props.history.push(i.d.route.URL_HOME)}).catch(function(){n.props.addErrorMessage("invalidCredentials","The email or password did not match our records.")})},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"overlay-box login"},r.a.createElement("div",{className:"login-signup-form"},this.displayErrors("unauthorizedToken"),r.a.createElement("h3",{className:"login-form-header"},"LOG IN"),r.a.createElement("div",{className:"ui tiny form"},r.a.createElement("div",{className:"two fields"},r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"text",name:"email",placeholder:"Account Email",onChange:this.handleChange,onKeyUp:this.pressedEnter,value:this.state.email})),r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:this.handleChange,onKeyUp:this.pressedEnter,value:this.state.password}))),this.displayErrors("invalidCredentials"),r.a.createElement("div",{className:"btn-submit"},r.a.createElement("div",{className:"ui submit button",onClick:this.handleSubmit},"Log me in!")))),r.a.createElement("h3",null,"New to Supp? ",r.a.createElement(f.a,{to:i.d.route.URL_SIGNUP,exact:!0},"Sign up!")))}}]),t}(a.Component),b=Object(v.b)(function(e){return{errorMessages:e.userAuth.errorMessages}},function(e){return{jwtSavedInLocalStorage:function(){return e(Object(E.c)())},addErrorMessage:function(t,n){return e(Object(E.a)(t,n))},cleanErrorMessages:function(){return e(Object(E.b)())}}})(Object(g.a)(O)),y=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state={username:"",email:"",password:"",confirmPassword:"",agreedCheckbox:!1,checkboxColor:"black"},n.handleChange=function(e){n.setState(Object(l.a)({},e.target.name,e.target.value))},n.handleCheckbox=function(){n.setState({agreedCheckbox:!n.state.agreedCheckbox})},n.displayErrors=function(e){return n.props.errorMessages[e]?r.a.createElement("p",null,n.props.errorMessages[e]):null},n.displayMessages=function(){if(0===Object.keys(n.props.errorMessages).length)return r.a.createElement("div",null,r.a.createElement("h3",{className:"signup-message"},"Find people around you"),r.a.createElement("h3",{className:"signup-message"},"Who love what you love"),r.a.createElement("h3",{className:"signup-message signup-message-connect"},"Connect!"),r.a.createElement("h3",{className:"signup-message"},"and make new friends"))},n.pressedEnter=function(e){"Enter"===e.key&&n.evaluateFields()},n.evaluateFields=function(){n.props.cleanErrorMessages();var e=!0;n.state.username.trim()||(e=!1,n.props.addErrorMessage("username","Enter a username.")),/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(n.state.email)||(e=!1,n.props.addErrorMessage("email","Invalid email address.")),n.state.password.length>7||(e=!1,n.props.addErrorMessage("password","Password must be at least 8 characters.")),n.state.password.length>7&&n.state.password!==n.state.confirmPassword&&(e=!1,n.props.addErrorMessage("confirmation","Confirmation password must match password.")),n.setState({checkboxColor:n.state.agreedCheckbox?"black":"red"},function(){return e&&"black"===n.state.checkboxColor?n.handleSubmit():null})},n.handleSubmit=function(){return c.a.signup(n.state).then(function(e){e.ok?c.a.login(n.state).then(function(e){c.a.setToken(e.jwt),n.props.jwtSavedInLocalStorage(),n.props.history.push(i.d.route.URL_HOME)}).catch(function(){n.props.history.push(i.d.route.URL_LOGIN)}):e.json().then(function(e){n.props.addErrorMessage("email",e.errors[0])})}).catch(function(){n.props.history.push(i.d.route.URL_SIGNUP)})},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"overlay-box signup"},r.a.createElement("div",{className:"login-signup-form"},r.a.createElement("h3",null,"Have an account? ",r.a.createElement(f.a,{to:i.d.route.URL_LOGIN,exact:!0},"Log in")),r.a.createElement("h3",{className:"login-form-header"},"SIGN UP"),r.a.createElement("div",{className:"ui tiny form"},r.a.createElement("div",{className:"two fields"},r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"text",name:"username",placeholder:"Username",onChange:this.handleChange,onKeyUp:this.pressedEnter,value:this.state.username}),this.displayErrors("username")),r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"text",name:"email",placeholder:"Account Email",onChange:this.handleChange,onKeyUp:this.pressedEnter,value:this.state.email}),this.displayErrors("email"))),r.a.createElement("div",{className:"two fields"},r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"password",name:"password",placeholder:"Password",onChange:this.handleChange,onKeyUp:this.pressedEnter,value:this.state.password}),this.displayErrors("password")),r.a.createElement("div",{className:"field"},r.a.createElement("input",{type:"password",name:"confirmPassword",placeholder:"Confirm Password",onChange:this.handleChange,onKeyUp:this.pressedEnter,value:this.state.confirmPassword}),this.displayErrors("confirmation"))),r.a.createElement("div",{className:"btn-submit"},r.a.createElement("div",{className:"ui checkbox"},r.a.createElement("input",{type:"checkbox",onClick:this.handleCheckbox,checked:this.state.agreed}),r.a.createElement("label",{className:"signup-error",style:{color:"".concat(this.state.checkboxColor)}},"I agree to the Terms and Conditions")),r.a.createElement("div",{className:"ui submit button",onClick:this.evaluateFields},"Create Account")))),this.displayMessages())}}]),t}(a.Component),C=Object(v.b)(function(e){return{errorMessages:e.userAuth.errorMessages}},function(e){return{jwtSavedInLocalStorage:function(){return e(Object(E.c)())},addErrorMessage:function(t,n){return e(Object(E.a)(t,n))},cleanErrorMessages:function(){return e(Object(E.b)())}}})(Object(g.a)(y)),I=n(424),k=function(){return r.a.createElement("div",{className:"overlay-box login"},r.a.createElement(I.a,{active:!0}))};t.a=function(){return r.a.createElement(a.Fragment,null,c.a.getToken()?r.a.createElement(k,null):r.a.createElement(o.a,null,r.a.createElement(s.a,{exact:!0,path:i.d.route.URL_SIGNUP,component:C}),r.a.createElement(s.a,{path:i.d.route.URL_ROOT,component:b})),r.a.createElement("div",{className:"welcome-container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column column-1"},r.a.createElement("img",{src:i.d.url.GITHUB_URL_ROOT+"/assets/welcome_images/helena-lopes-459331-unsplash.jpg",alt:"Photographer: Helena Lopes on Unsplash"}),r.a.createElement("img",{src:i.d.url.GITHUB_URL_ROOT+"/assets/welcome_images/mike-erskine-144525-unsplash.jpg",alt:"Photographer: Mike Erskine on Unsplash"}),r.a.createElement("img",{src:i.d.url.GITHUB_URL_ROOT+"/assets/welcome_images/alexis-brown-82988-unsplash.jpg",alt:"Photographer: Alexis Brown on Unsplash"}),r.a.createElement("img",{src:i.d.url.GITHUB_URL_ROOT+"/assets/welcome_images/ben-duchac-66002-unsplash.jpg",alt:"Photographer: Ben Duchac on Unsplash"}),r.a.createElement("img",{src:i.d.url.GITHUB_URL_ROOT+"/assets/welcome_images/kelsey-chance-575541-unsplash.jpg",alt:"Photographer: Kelsey Chance on Unsplash"})),r.a.createElement("div",{className:"column column-2"},r.a.createElement("img",{src:i.d.url.GITHUB_URL_ROOT+"/assets/welcome_images/ben-duchac-66002-unsplash.jpg",alt:"Photographer: Ben Duchac on Unsplash"}),r.a.createElement("img",{src:i.d.url.GITHUB_URL_ROOT+"/assets/welcome_images/kelsey-chance-575541-unsplash.jpg",alt:"Photographer: Kelsey Chance on Unsplash"}),r.a.createElement("img",{src:i.d.url.GITHUB_URL_ROOT+"/assets/welcome_images/anthony-intraversato-455600-unsplash.jpg",alt:"Photographer: Anthony Intraversato on Unsplash"}),r.a.createElement("img",{src:i.d.url.GITHUB_URL_ROOT+"/assets/welcome_images/roman-kraft-669711-unsplash.jpg",alt:"Photographer: Roman Kraft on Unsplash"}),r.a.createElement("img",{src:i.d.url.GITHUB_URL_ROOT+"/assets/welcome_images/kelsey-chance-575541-unsplash.jpg",alt:"Photographer: Kelsey Chance on Unsplash"})),r.a.createElement("div",{className:"column column-3"},r.a.createElement("img",{src:i.d.url.GITHUB_URL_ROOT+"/assets/welcome_images/mike-erskine-144525-unsplash.jpg",alt:"Photographer: Mike Erskine on Unsplash"}),r.a.createElement("img",{src:i.d.url.GITHUB_URL_ROOT+"/assets/welcome_images/alexis-brown-82988-unsplash.jpg",alt:"Photographer: Alexis Brown on Unsplash"}),r.a.createElement("img",{src:i.d.url.GITHUB_URL_ROOT+"/assets/welcome_images/roman-kraft-669711-unsplash.jpg",alt:"Photographer: Roman Kraft on Unsplash"}),r.a.createElement("img",{src:i.d.url.GITHUB_URL_ROOT+"/assets/welcome_images/helena-lopes-459331-unsplash.jpg",alt:"Photographer: Helena Lopes on Unsplash"}),r.a.createElement("img",{src:i.d.url.GITHUB_URL_ROOT+"/assets/welcome_images/mike-erskine-144525-unsplash.jpg",alt:"Photographer: Mike Erskine on Unsplash"})),r.a.createElement("div",{className:"column column-4"},r.a.createElement("img",{src:i.d.url.GITHUB_URL_ROOT+"/assets/welcome_images/roman-kraft-669711-unsplash.jpg",alt:"Photographer: Roman Kraft on Unsplash"}),r.a.createElement("img",{src:i.d.url.GITHUB_URL_ROOT+"/assets/welcome_images/kelsey-chance-575541-unsplash.jpg",alt:"Photographer: Kelsey Chance on Unsplash"}),r.a.createElement("img",{src:i.d.url.GITHUB_URL_ROOT+"/assets/welcome_images/ben-duchac-66002-unsplash.jpg",alt:"Photographer: Ben Duchac on Unsplash"}),r.a.createElement("img",{src:i.d.url.GITHUB_URL_ROOT+"/assets/welcome_images/ben-duchac-66002-unsplash.jpg",alt:"Photographer: Ben Duchac on Unsplash"}),r.a.createElement("img",{src:i.d.url.GITHUB_URL_ROOT+"/assets/welcome_images/kelsey-chance-575541-unsplash.jpg",alt:"Photographer: Kelsey Chance on Unsplash"})))))}},17:function(e,t,n){"use strict";var a=n(11),r=n(16),o=n(4),s=function(){function e(){Object(a.a)(this,e)}return Object(r.a)(e,null,[{key:"setToken",value:function(e){return localStorage.setItem("token",e)}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"deleteToken",value:function(){localStorage.removeItem("token")}},{key:"login",value:function(e){return fetch("".concat(o.d.url.API_ROOT,"/user_token"),{method:"POST",headers:o.c,body:JSON.stringify({auth:{email:e.email.toLowerCase(),password:e.password}})}).then(function(e){return e.json()})}},{key:"signup",value:function(e){return fetch("".concat(o.d.url.API_ROOT,"/users/create"),{method:"POST",headers:o.c,body:JSON.stringify({user:{email:e.email.toLowerCase(),password:e.password,password_confirmation:e.confirmPassword,username:e.username}})})}}]),e}();t.a=s},206:function(e,t,n){"use strict";(function(e){var a=n(11),r=n(16),o=n(15),s=n(13),c=n(14),i=n(0),l=n.n(i),u=n(9),m=n(430),d=n(261),p=n(431),h=n(45),f=n(207),g=n(17),v=n(4),E=n(33),O=n(36),b=n(71),y=n(228),C=n(138),I=n(137),k=n(226),j=n(227),_=function(e){function t(){var e,n;Object(a.a)(this,t);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(n=Object(o.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(c)))).getCurrentPosition=function(){if(g.a.getToken()&&navigator.geolocation)return navigator.geolocation.getCurrentPosition(function(e){n.props.thunkPersistCurrentGeolocation(n.props.userId,e.coords.latitude,e.coords.longitude)})},n.routerFunction=function(){return g.a.getToken()&&n.props.userId?l.a.createElement(h.ActionCableProvider,{url:v.d.url.API_WS_ROOT+"?user=".concat(n.props.userId)},l.a.createElement(m.a,null,l.a.createElement(d.a,{path:v.d.route.URL_USER_PROFILE,component:k.a}),l.a.createElement(d.a,{path:v.d.route.URL_HOME,component:I.a}),l.a.createElement(d.a,{path:v.d.route.URL_ROOT,component:I.a}))):l.a.createElement(d.a,{path:v.d.route.URL_ROOT,component:C.a})},n}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){g.a.getToken()&&(this.props.jwtSavedInLocalStorage(),this.props.thunkLogin(),this.props.thunkSaveClosestUsers())}},{key:"componentDidUpdate",value:function(e){if(this.props.userId!==e.userId&&this.getCurrentPosition(),null!==this.props.userId&&(this.props.lat!==e.lat||this.props.lon!==e.lon))return this.props.loggedIn?this.props.thunkSaveClosestUsers():null;!1===e.jwtToken&&!0===this.props.jwtToken&&g.a.getToken()&&(this.props.thunkLogin(),this.props.thunkSaveClosestUsers()),this.props.location.pathname!==e.location.pathname&&window.Appcues.page()}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(y.a,null),this.routerFunction(),l.a.createElement(j.a,null))}}]),t}(i.Component);t.a=Object(f.hot)(e)(Object(p.a)(Object(u.b)(function(e){return{jwtToken:e.userAuth.jwtToken,userId:e.userAuth.userId,loggedIn:e.userAuth.loggedIn,closestUsers:e.userFriends.closestUsers,lat:e.userProfile.lat,lon:e.userProfile.lon}},function(e){return{thunkSaveClosestUsers:function(){return e(Object(O.a)())},thunkLogin:function(){return e(Object(E.e)())},jwtSavedInLocalStorage:function(){return e(Object(E.c)())},thunkPersistCurrentGeolocation:function(t,n,a){return e(Object(b.a)(t,n,a))}}})(_)))}).call(this,n(142)(e))},226:function(e,t,n){"use strict";var a=n(32),r=n(11),o=n(16),s=n(15),c=n(13),i=n(14),l=n(0),u=n.n(l),m=n(431),d=n(9),p=n(12),h=n(4),f=n(71),g=function(e){function t(){var e,n;Object(r.a)(this,t);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(n=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(i)))).state={username:p.a.capitalize(n.props.username),bio:n.props.bio,profile_image:void 0},n.handleChange=function(e){n.setState(Object(a.a)({},e.target.name,e.target.value))},n.handleUpload=function(e){n.setState(Object(a.a)({},e.target.name,e.target.files[0]))},n.handleSubmit=function(){n.state.profile_image&&n.props.thunkUploadProfile(n.props.user_id,n.state.profile_image),(n.state.username||n.state.bio)&&n.props.thunkUpdateProfileInfo(n.props.user_id,n.state.username,n.state.bio),n.props.history.push(h.d.route.URL_HOME)},n}return Object(i.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return u.a.createElement(l.Fragment,null,u.a.createElement("div",{className:"user-account-container"},u.a.createElement("div",{className:"update-profile-form "},u.a.createElement("div",{className:"signup-message"},"YOUR PROFILE"),u.a.createElement("br",null),u.a.createElement("h4",null,"Username"),u.a.createElement("div",{className:"ui input"},u.a.createElement("br",null),u.a.createElement("input",{type:"text",name:"username",placeholder:"Username",onChange:this.handleChange,value:this.state.username})),u.a.createElement("br",null),u.a.createElement("h4",null,"About you"),u.a.createElement("div",{className:"ui form"},u.a.createElement("textarea",{name:"bio",placeholder:"Few words about yourself",onChange:this.handleChange,value:this.state.bio})),u.a.createElement("h4",null," Upload a profile photo "),u.a.createElement("input",{type:"file",name:"profile_image",ref:this.fileInput,onChange:this.handleUpload}),u.a.createElement("br",null),u.a.createElement("div",{className:"ui submit button",onClick:this.handleSubmit},"Save Profile"))))}}]),t}(l.Component);t.a=Object(d.b)(function(e){return{user_id:e.userAuth.userId,username:e.userProfile.username,bio:e.userProfile.bio,profileImageLink:e.userProfile.profileImageLink}},function(e){return{thunkUploadProfile:function(t,n){return e(Object(f.c)(t,n))},thunkUpdateProfileInfo:function(t,n,a){return e(Object(f.b)(t,n,a))}}})(Object(m.a)(g))},227:function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=function(){return r.a.createElement("div",{className:"app-footer"},r.a.createElement("p",{className:"footer-logo app-footer-left"},"Supp"),r.a.createElement("div",{className:"app-footer-right"},r.a.createElement("div",null,"\xa9 2018 Supp"),r.a.createElement("div",null,"Privacy"),r.a.createElement("div",null,"Terms")))}},228:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(433),s=n(4),c=n(431),i=n(9),l=n(17),u=n(12),m=n(33),d=Object(i.b)(function(e){return{username:u.a.capitalize(e.userProfile.username),loggedIn:e.userAuth.loggedIn,profileImageLink:e.userProfile.profileImageLink}},function(e){return{logout:function(){return e(Object(m.d)())}}})(Object(c.a)(function(e){return e.loggedIn?r.a.createElement("div",{className:"user-profile-bar"},r.a.createElement("div",{className:"dropdown"},r.a.createElement("img",{className:"profile-image animated bounceIn delay-5s shake-slow",src:u.a.getStandardImageUrl(e.profileImageLink),alt:"profile"}),r.a.createElement("div",{className:"dropdown-content"},r.a.createElement("div",{className:"dropdown-item"},r.a.createElement("p",null,e.username)),r.a.createElement(o.a,{to:s.d.route.URL_HOME,exact:!0},"Home"),r.a.createElement(o.a,{to:s.d.route.URL_USER_PROFILE,exact:!0},"Profile"),r.a.createElement(o.a,{to:s.d.route.URL_USER_PROFILE,exact:!0},"Account"),r.a.createElement("button",{className:"logout-btn",onClick:function(){return l.a.deleteToken(),e.logout(),void e.history.push(s.d.route.URL_LOGIN)}},"Log Out")))):null})),p=n(202),h=n(5);var f=Object(i.b)(function(e){return{showChatContainer:e.containerDisplay.showChatContainer,showInterestsContainer:e.containerDisplay.showInterestsContainer,loggedIn:e.userAuth.loggedIn}},function(e){return{displayScreenContainers:function(t,n){return e((a=t,r=n,{type:h.e,payload:{showChatContainer:a,showInterestsContainer:r}}));var a,r}}})(function(e){function t(t){var n,a;"interest"===t?!e.showChatContainer&&!e.showInterestsContainer||e.showChatContainer&&!e.showInterestsContainer?(n=!1,a=!0):(n=!1,a=!1):"chat"===t&&(!e.showChatContainer&&!e.showInterestsContainer||!e.showChatContainer&&e.showInterestsContainer?(n=!0,a=!1):(n=!1,a=!1)),e.displayScreenContainers(n,a)}return e.loggedIn?r.a.createElement(a.Fragment,null,r.a.createElement(p.a,{color:"teal",name:"list alternate",onClick:function(){return t("interest")}}),r.a.createElement(p.a,{color:"teal",name:"chat",onClick:function(){return t("chat")}})):null});t.a=function(){return r.a.createElement("div",{className:"app-header"},r.a.createElement(o.a,{to:s.d.route.URL_HOME,exact:!0},r.a.createElement("p",{className:"header-logo animated rubberBand delay-2s"},"Supp")),r.a.createElement("div",{className:"app-screen-icons"}),r.a.createElement("div",{className:"screen-app-icon-header"},r.a.createElement(f,null)),r.a.createElement(d,null))}},239:function(e,t,n){e.exports=n(418)},248:function(e,t,n){},253:function(e,t,n){},33:function(e,t,n){"use strict";n.d(t,"e",function(){return s}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return i}),n.d(t,"a",function(){return l}),n.d(t,"b",function(){return u});var a=n(4),r=n(17),o=n(5),s=function(){return function(e){fetch("".concat(a.d.url.API_ROOT,"/user/auth"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(function(e){return e.json()}).then(function(t){e({type:o.g,payload:{username:t.username,email:t.email,userId:t.id,bio:null===t.bio?"":t.bio,loggedIn:!0,userInterests:t.userInterests,profileImageLink:t.profile_image,prevGeolocationLat:t.lat,prevGeolocationLon:t.lon}}),window.Appcues.identify("".concat(t.id),{name:t.username,email:t.email})}).catch(function(){return e({type:o.a,payload:{key:"unauthorizedToken",value:"Unauthorized credentials. Please, log in again."}}),r.a.deleteToken(),e({type:o.h})})}};function c(){return{type:o.f}}function i(){return{type:o.h}}function l(e,t){return{type:o.a,payload:{key:e,value:t}}}function u(){return{type:o.c,payload:{errorMessages:{}}}}},36:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return i});var a=n(4),r=n(17),o=n(5),s=function(){return function(e){fetch("".concat(a.d.url.API_ROOT,"/users"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(function(e){return e.json()}).then(function(t){return e({type:o.i,payload:{closestUsers:t}})}).catch(function(){return console.log("No closest users yet")})}},c=function(e){return function(t){fetch("".concat(a.d.url.API_ROOT,"/users"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({filter:{filterId:e}})}).then(function(e){return e.json()}).then(function(e){return t({type:o.l,payload:{closestUsers:e}})}).catch(function(){return t({type:o.a,payload:{key:"unauthorizedToken",value:"Unauthorized credentials. Please, log in again."}}),r.a.deleteToken(),t({type:o.h})})}};function i(e){return{type:o.s,payload:{closestUsers:e}}}},4:function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return s});var a={url:{API_SHORT_ROOT:"https://supp-server.herokuapp.com",API_ROOT:"https://supp-server.herokuapp.com/api/v1",API_WS_ROOT:"wss://supp-server.herokuapp.com/api/v1/cable",GITHUB_URL_ROOT:"https://albertcarreras.github.io/supp-client/"},route:{URL_ROOT:"/supp-client",URL_HOME:"/supp-client/home",URL_LOGIN:"/supp-client/login",URL_SIGNUP:"/supp-client/signup",URL_USER_PROFILE:"/supp-client/user/profile"}},r={Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},o={Authorization:"Bearer ".concat(localStorage.getItem("token"))},s={Accept:"application/json","Content-Type":"application/json"}},418:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(60),s=n.n(o),c=n(9),i=n(428),l=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function u(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var m=n(53),d=n(32),p=n(18),h=n(5),f={jwtToken:!1,email:"",userId:null,loggedIn:!1,errorMessages:{}};var g={username:"",bio:"",profileImageLink:void 0,lat:void 0,lon:void 0,prevGeolocationLat:void 0,prevGeolocationLon:void 0};var v={userInterests:[],selectedCommonInterest:void 0};var E={closestUsers:[]};var O=n(46),b={conversations:[],selectedConversation:void 0};var y={showChatContainer:!1,showInterestsContainer:!1};var C=Object(m.c)({userAuth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.f:return Object(p.a)({},e,{jwtToken:!0});case h.g:return Object(p.a)({},e,{email:t.payload.email,userId:t.payload.userId,loggedIn:!0});case h.a:return Object(p.a)({},e,{errorMessages:Object(p.a)({},e.errorMessages,Object(d.a)({},t.payload.key,t.payload.value))});case h.c:return Object(p.a)({},e,{errorMessages:{}});default:return e}},userProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.g:return Object(p.a)({},e,{username:t.payload.username,bio:t.payload.bio,profileImageLink:t.payload.profileImageLink,prevGeolocationLat:t.payload.prevGeolocationLat,prevGeolocationLon:t.payload.prevGeolocationLon,loggedIn:!0});case h.m:return Object(p.a)({},e,{username:t.payload.username,bio:t.payload.bio});case h.n:return Object(p.a)({},e,{profileImageLink:t.payload.profileImageLink});case h.k:return Object(p.a)({},e,{lat:t.payload.lat,lon:t.payload.lon,prevGeolocationLat:t.payload.lat,prevGeolocationLon:t.payload.lon});default:return e}},userInterests:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.g:return Object(p.a)({},e,{userInterests:t.payload.userInterests,selectedCommonInterest:t.payload.selectedCommonInterest});case h.q:return Object(p.a)({},e,{selectedCommonInterest:t.payload.selectedCommonInterest});case h.r:return Object(p.a)({},e,{selectedCommonInterest:void 0});case h.p:return Object(p.a)({},e,{userInterests:t.payload.userInterestArray});default:return e}},userFriends:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.i:case h.l:case h.s:return Object(p.a)({},e,{closestUsers:t.payload.closestUsers});default:return e}},userConversations:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.j:return Object(p.a)({},e,{conversations:t.payload.conversations});case h.b:return Object(p.a)({},e,{conversations:Object(O.a)(e.conversations).concat([t.payload.receivedNewConversation])});case h.o:return Object(p.a)({},e,{selectedConversation:t.payload.selectedConversation});case h.d:return Object(p.a)({},e,{selectedConversation:void 0});default:return e}},containerDisplay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.e:return Object(p.a)({},e,{showChatContainer:t.payload.showChatContainer,showInterestsContainer:t.payload.showInterestsContainer});default:return e}}}),I=function(e,t){return"LOGOUT"===t.type&&(e=void 0),C(e,t)},k=n(205),j=(n(247),Object(m.d)(I,Object(m.a)(k.a))),_=(n(248),n(250),n(253),n(206));s.a.render(r.a.createElement(c.a,{store:j},r.a.createElement(i.a,null,r.a.createElement(_.a,null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/supp-client",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/supp-client","/service-worker.js");l?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):u(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):u(e)})}}()},5:function(e,t,n){"use strict";n.d(t,"f",function(){return a}),n.d(t,"g",function(){return r}),n.d(t,"h",function(){return o}),n.d(t,"m",function(){return s}),n.d(t,"n",function(){return c}),n.d(t,"k",function(){return i}),n.d(t,"i",function(){return l}),n.d(t,"s",function(){return u}),n.d(t,"q",function(){return m}),n.d(t,"r",function(){return d}),n.d(t,"l",function(){return p}),n.d(t,"p",function(){return h}),n.d(t,"j",function(){return f}),n.d(t,"b",function(){return g}),n.d(t,"o",function(){return v}),n.d(t,"d",function(){return E}),n.d(t,"c",function(){return O}),n.d(t,"a",function(){return b}),n.d(t,"e",function(){return y});var a="JWT",r="LOGIN",o="LOGOUT",s="SAVE_PROFILE",c="SAVE_PROFILE_IMAGE",i="SAVE_CURRENT_GEOLOCATION",l="SAVE_CLOSEST_USERS",u="UPDATE_ACTIVE_CLOSEST_USERS",m="SELECT_COMMON_INTERESTS",d="UNSELECT_COMMON_INTERESTS",p="SAVE_FILTERED_CLOSEST_USERS",h="SAVE_USER_INTERESTS",f="SAVE_CONVERSATIONS",g="APPEND_NEW_CONVERSATION",v="SAVE_SELECTED_CONVERSATION",E="CLEAN_SELECTED_CONVERSATION",O="CLEAN_ERROR_MESSAGES",b="ADD_ERROR_MESSAGE",y="DISPLAY_SCREEN_CONTAINER"},71:function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return l});var a=n(18),r=n(4),o=n(17),s=n(5),c=function(e,t,n){return function(a){fetch("".concat(r.d.url.API_ROOT,"/user/").concat(e),{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({user:{last_location_lat:t,last_location_lon:n}})}).then(function(e){return e.json()}).then(function(e){return a({type:s.k,payload:{lat:e.lat,lon:e.lon,prevGeolocationLat:e.lat,prevGeolocationLon:e.lon}})}).catch(function(){return a({type:s.a,payload:{key:"unauthorizedToken",value:"Unauthorized credentials. Please, log in again."}}),o.a.deleteToken(),a({type:s.h})})}},i=function(e,t){var n=new FormData;return n.append("user_id",e),n.append("profile_image",t),function(e){fetch("".concat(r.d.url.API_ROOT,"/users/uploadProfile"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:n}).then(function(e){return e.json()}).then(function(t){return e({type:s.n,payload:{profileImageLink:t.url}})}).catch(function(){return e({type:s.a,payload:{key:"unauthorizedToken",value:"Unauthorized credentials. Please, log in again."}}),o.a.deleteToken(),e({type:s.h})})}},l=function(e,t,n){var c={user:{}};return t&&(c=Object.assign({},c,{user:Object(a.a)({},c.user,{username:t})})),n&&(c=Object.assign({},c,{user:Object(a.a)({},c.user,{bio:n})})),function(a){fetch("".concat(r.d.url.API_ROOT,"/user/").concat(e),{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(c)}).then(function(e){return e.json()}).then(function(){return a({type:s.m,payload:{username:t,bio:n}})}).catch(function(){return a({type:s.a,payload:{key:"unauthorizedToken",value:"Unauthorized credentials. Please, log in again."}}),o.a.deleteToken(),a({type:s.h})})}}}},[[239,2,1]]]);
//# sourceMappingURL=main.6d4fc356.chunk.js.map